# 在线部署问题排查

## 最可能的问题

### 1. 图片文件未上传到 GitHub ⚠️

**检查方法**：
```bash
# 在本地检查
git ls-files image/

# 如果返回空，说明图片没有提交
```

**解决方法**：
```bash
# 添加图片文件夹
git add image/

# 提交
git commit -m "添加图片文件"

# 推送
git push
```

**注意**：GitHub 对单个文件有 100MB 限制，如果图片太大需要压缩。

### 2. 图片路径问题

**检查**：确保 `main.js` 中使用的是相对路径：
- ✅ 正确：`'image/微信图片_xxx.jpg'`
- ❌ 错误：`'/image/微信图片_xxx.jpg'` 或绝对路径

### 3. CDN 无法访问

**症状**：页面空白，控制台显示 CDN 加载失败

**解决方法**：
1. 代码已包含多个 CDN 备用，会自动尝试
2. 如果所有 CDN 都失败，使用本地版本：
   ```bash
   ./download-three.sh
   # 然后部署时使用 index-local.html
   ```

### 4. GitHub Pages 配置错误

**检查**：
1. Settings > Pages
2. Source: 选择 `main` 分支
3. Folder: 选择 `/ (root)`
4. 点击 Save

**等待**：部署通常需要 1-2 分钟

### 5. 文件大小超限

**GitHub 限制**：
- 单个文件：100MB
- 仓库总大小：建议不超过 1GB

**检查**：
```bash
# 检查图片大小
du -h image/*

# 如果太大，需要压缩
```

## 快速修复步骤

### 步骤 1: 检查文件是否已提交

```bash
git status
git ls-files | grep image
```

如果 `image/` 文件夹没有在列表中，需要添加：
```bash
git add image/
git commit -m "添加图片"
git push
```

### 步骤 2: 检查 GitHub Pages 设置

1. 进入 GitHub 仓库
2. Settings > Pages
3. 确保 Source 设置为 `main` 分支，`/ (root)` 文件夹
4. 保存并等待部署

### 步骤 3: 检查部署日志

1. 在 GitHub 仓库页面
2. 点击 **Actions** 标签
3. 查看最新的部署日志
4. 查看错误信息

### 步骤 4: 测试访问

部署成功后，访问：
- `https://你的用户名.github.io/仓库名/`
- 或 `https://你的用户名.github.io/仓库名/index.html`

## 常见错误信息

### "404 Not Found"
- 检查文件路径
- 确保所有文件已提交

### "Failed to load resource"
- 检查图片路径是否正确
- 检查 CDN 是否可访问

### "CORS policy"
- GitHub Pages 应该自动处理
- 如果还有问题，检查文件路径

## 替代部署方案

如果 GitHub Pages 有问题，可以尝试：

### Vercel（推荐）
1. 访问 https://vercel.com
2. 导入 GitHub 仓库
3. 自动部署，支持自动 HTTPS

### Netlify
1. 访问 https://netlify.com
2. 拖拽项目或连接 GitHub
3. 自动部署

## 调试技巧

1. **查看浏览器控制台**（F12）
   - 查看 Console 标签的错误
   - 查看 Network 标签，检查哪些资源加载失败

2. **检查 GitHub Actions**
   - 在仓库的 Actions 标签查看部署日志

3. **本地测试**
   - 确保本地能正常运行
   - 如果本地可以，问题可能在部署配置

